--09092020
UPDATE TBLRUJJENISBANGUNAN SET KETERANGAN = 'Bangunan Konkrit'
WHERE ID_JENIS_BANGUNAN = '1';



--Tambah Column SEMAK10 dan SEMAK20
ALTER TABLE TBLPPTSENARAISEMAK ADD (
    SEMAK10 VARCHAR(1 byte),
    SEMAK20 VARCHAR(1 byte)
);



--14072020	PPT-33
ALTER TABLE TBLPPTPERMINTAANUKUR ADD NO_JUPEM VARCHAR(400);

----------------------------------------------------------------------------------

--14072020	PPT-06
ALTER TABLE TBLPPTBORANGEHAKMILIK ADD MASA_SIASATAN VARCHAR(400);
ALTER TABLE TBLPPTBORANGEHAKMILIK ADD JENIS_WAKTU VARCHAR(400);

----------------------------------------------------------------------------------


--20200609 UAT--------------------------------------------------------------------------------

ALTER TABLE TBLPPTTANAHUMUM ADD KETERANGAN_KEROSAKAN VARCHAR(400);

--28042020--------------------------------------------------------------------------------
--2020/04/29 Run Staging
ALTER TABLE TBLRUJJENISPB ADD FLAG_AKTIF VARCHAR(2) DEFAULT 'Y';

UPDATE TBLRUJJENISPB 
SET FLAG_AKTIF='Y';

--26/04/2020 Dari Rozi --------------------------------------------------------------------------------
--BLPPTHAKMILIKSTRATA 
--TBLRUJJENISHAKMILIK (LIST > Tambah TT - STRATA)

--PPT 41
--DATABASE : tblpptpermohonan
--TAMBAH COLUMN 
--TARIKH_PENDUDUKAN_MULA (DATE) 
--TARIKH_PENDUDUKAN_AKHIR (DATE) 
--TEMPOH_PENDUDUKAN (VARCHAR 5)

ALTER TABLE TBLPPTPERMOHONAN ADD TEMPOH_PENDUDUKAN VARCHAR(5);
ALTER TABLE TBLPPTPERMOHONAN ADD TARIKH_PENDUDUKAN_MULA DATE(5);
ALTER TABLE TBLPPTPERMOHONAN ADD TARIKH_PENDUDUKAN_AKHIR DATE(5);


--02/03/2020
--02032020--------------------------------------------------------------------------------

--DROP TRIGGER PPTDOKUMENHAKMILIK_BI;

CREATE OR REPLACE TRIGGER PPTDOKUMENHAKMILIK_BI    
before insert on     TBLPPTDOKUMENHAKMILIK    for each row
begin    if :new.ID_DOKUMEN   is null    then SELECT (SELECT kod_negeri FROM tbllookupstate) || TO_CHAR (SYSDATE, 'YY') || PPTDOKUMENHAKMILIK_SEQ.NEXTVAL into :new.ID_DOKUMEN          from dual;    end if;    end;
/

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

--02/03/2020 
--DROP SEQUENCE PPTDOKUMENHAKMILIK_SEQ;

CREATE SEQUENCE PPTDOKUMENHAKMILIK_SEQ
  START WITH 1
  MAXVALUE 999999999
  MINVALUE 1
  NOCYCLE
  NOCACHE
  NOORDER;
  
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 
CREATE TABLE TBLPPTDOKUMENHAKMILIK (
	ID_DOKUMEN NUMBER(16,0),
	ID_RUJUKAN NUMBER(16,0),
	ID_PERMOHONAN NUMBER(16,0),
	ID_JENISDOKUMEN NUMBER(16,0),
	NAMA_DOKUMEN VARCHAR2(200),
	FORMAT VARCHAR2(100),
	SAIZ NUMBER(16,0),
	KANDUNGAN BLOB,
	TARIKH_DOKUMEN DATE,
	TARIKH_MASUK DATE,
	ID_MASUK NUMBER(16,0),
	TARIKH_KEMASKINI DATE,
	ID_KEMASKINI NUMBER(16,0)
);

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

ALTER TABLE TBLPPTPERMOHONAN
MODIFY(NO_RUJUKAN_PTD VARCHAR2(100 BYTE));

ALTER TABLE TBLPPTPERMOHONAN
MODIFY(NO_RUJUKAN_UPT VARCHAR2(100 BYTE));

ALTER TABLE TBLPPTPERMOHONAN
MODIFY(NO_RUJUKAN_PTG VARCHAR2(100 BYTE));

ALTER TABLE TBLPPTPERMOHONAN
ADD(TARIKH_LENGKAP DATE);

ALTER TABLE TBLPPTWARTA
MODIFY(NO_WARTA VARCHAR2(100 BYTE));

ALTER TABLE TBLPPTHAKMILIKPB
ADD(CATATAN2 VARCHAR2(100 BYTE));

ALTER TABLE TBLPPTTANAHUMUM
ADD(NILAI_TANAH VARCHAR2(4000 BYTE));

ALTER TABLE TBLPPTBANGUNAN
ADD(ID_KATEGORI_TANAH NUMBER);

ALTER TABLE TBLPPTBANGUNAN
ADD(LAIN_JENIS_BANGUNAN VARCHAR2(100 BYTE));

ALTER TABLE TBLPPTENDOSANBORANGD
ADD(CATATAN VARCHAR2(200 BYTE));

ALTER TABLE TBLPPTENDOSANBORANGD
ADD(ID_WARTA NUMBER);

ALTER TABLE TBLPPTENDOSANBORANGD
ADD(TARIKH_BORANGD DATE);

ALTER TABLE TBLPPTPERMOHONAN
ADD(TARIKH_PERMOHONAN_KJP DATE);


CREATE SEQUENCE TBLRUJJENISBANGUNAN_SEQ
  START WITH 1
  MAXVALUE 999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  CACHE 20
  NOORDER;

ALTER TABLE TBLRUJJENISBANGUNAN
 DROP PRIMARY KEY CASCADE;
DROP TABLE TBLRUJJENISBANGUNAN CASCADE CONSTRAINTS;

CREATE TABLE TBLRUJJENISBANGUNAN
(
  ID_JENIS_BANGUNAN  NUMBER                     NOT NULL,
  NAMA_BANGUNAN      VARCHAR2(100 BYTE),
  KETERANGAN         VARCHAR2(400 BYTE)
)
TABLESPACE ETAPP01
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX TBLRUJJENISBANGUNAN_PK ON TBLRUJJENISBANGUNAN
(ID_JENIS_BANGUNAN)
LOGGING
TABLESPACE ETAPP01
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE TBLRUJJENISBANGUNAN ADD (
  CONSTRAINT TBLRUJJENISBANGUNAN_PK
 PRIMARY KEY
 (ID_JENIS_BANGUNAN)
    USING INDEX 
    TABLESPACE EKPTG
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               ));

--v6--
SET DEFINE OFF;
Insert into TBLRUJJENISBANGUNAN
   (ID_JENIS_BANGUNAN, NAMA_BANGUNAN, KETERANGAN)
 Values
   (2, 'Separuh kekal', 'Bangunan separuh konkrit dan separuh papan');
Insert into TBLRUJJENISBANGUNAN
   (ID_JENIS_BANGUNAN, NAMA_BANGUNAN, KETERANGAN)
 Values
   (3, 'Sementara kekal', 'Binaan bangunan dan papan dan kayu');
Insert into TBLRUJJENISBANGUNAN
   (ID_JENIS_BANGUNAN, NAMA_BANGUNAN, KETERANGAN)
 Values
   (1, 'Kekal', 'Bangunan konkrit dan mendapat kelulusan CF');
Insert into TBLRUJJENISBANGUNAN
   (ID_JENIS_BANGUNAN, NAMA_BANGUNAN, KETERANGAN)
 Values
   (4, 'Lain-lain', 'Lain-lain');


// TBLPPTSENARAISEMAK

ALTER TABLE TBLPPTSENARAISEMAK
ADD(SEMAK8 VARCHAR2(1 BYTE));

COMMENT ON COLUMN TBLPPTSENARAISEMAK.SEMAK8 IS 'Y=YA; T=TIDAK';


//TBLPPTIMEJBORANG

DROP TABLE TBLPPTIMEJBORANG CASCADE CONSTRAINTS;

CREATE TABLE TBLPPTIMEJBORANG
(
  ID_PPTIMEJBORANG  NUMBER(16),
  ID_JENISDOKUMEN   NUMBER(16),
  IMEJ              BLOB,
  ID_MASUK          NUMBER,
  TARIKH_MASUK      DATE,
  ID_KEMASKINI      NUMBER,
  TARIKH_KEMASKINI  DATE,
  JENIS_MIME        VARCHAR2(100 BYTE)
)
TABLESPACE EKPTG
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
LOB (IMEJ) STORE AS 
      ( TABLESPACE  EKPTG 
        ENABLE      STORAGE IN ROW
        CHUNK       8192
        RETENTION
        NOCACHE
        INDEX       (
          TABLESPACE EKPTG
          STORAGE    (
                      INITIAL          64K
                      NEXT             1
                      MINEXTENTS       1
                      MAXEXTENTS       UNLIMITED
                      PCTINCREASE      0
                      BUFFER_POOL      DEFAULT
                     ))
        STORAGE    (
                    INITIAL          64K
                    MINEXTENTS       1
                    MAXEXTENTS       UNLIMITED
                    PCTINCREASE      0
                    BUFFER_POOL      DEFAULT
                   )
      )
NOCACHE
NOPARALLEL
MONITORING;


//15.5.2017

ALTER TABLE TBLPPTPERMINTAANUKUR
ADD (NO_HAKMILIK_SAMBUNG VARCHAR2(50 BYTE));

ALTER TABLE TBLPPTPERMINTAANUKUR
ADD (LUAS_AMBIL_SAMBUNG NUMBER(30,4));

//26.9.2017
ALTER TABLE TBLPPTAWARD
ADD(PERATUS_NILAI VARCHAR2(3 BYTE));

//8.10.2017
ALTER TABLE TBLPPTULASANTEKNIKAL
ADD(NAMA_JPBD VARCHAR2(50 BYTE));

ALTER TABLE TBLPPTULASANTEKNIKAL
ADD(EMEL_JPBD VARCHAR2(50 BYTE));

ALTER TABLE TBLPPTULASANTEKNIKAL
ADD(NAMA_JPPH VARCHAR2(50 BYTE));

ALTER TABLE TBLPPTULASANTEKNIKAL
ADD(EMEL_JPPH VARCHAR2(50 BYTE));

// 23.1.2018
ALTER TABLE TBLPPTHAKMILIK
MODIFY(SEKATAN_KEPENTINGAN VARCHAR2(4000 BYTE));

//11.02.2020
ALTER TABLE TBLPPTHAKMILIK ADD TARIKH_PEMBAYARAN DATE;
COMMIT;


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// TAMBAHAN data TBLSEMAKAN untuk jenis tanaman dan jenis pemilikan

INSERT INTO EKPTGHQLIVE.TBLSEMAKAN
(ID_SEMAKAN, ID_PARENT, KOD_SEMAK, PERIHAL, LAIN_LAIN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(184, NULL, 'jenistanaman', 'Getah', NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKAN
(ID_SEMAKAN, ID_PARENT, KOD_SEMAK, PERIHAL, LAIN_LAIN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(185, NULL, 'jenistanaman', 'Sawit', NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKAN
(ID_SEMAKAN, ID_PARENT, KOD_SEMAK, PERIHAL, LAIN_LAIN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(186, NULL, 'jenistanaman', 'Padi', NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKAN
(ID_SEMAKAN, ID_PARENT, KOD_SEMAK, PERIHAL, LAIN_LAIN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(187, NULL, 'jenistanaman', 'Tanaman kontan', NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKAN
(ID_SEMAKAN, ID_PARENT, KOD_SEMAK, PERIHAL, LAIN_LAIN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(188, NULL, 'jenistanaman', 'Lain - lain', NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKAN
(ID_SEMAKAN, ID_PARENT, KOD_SEMAK, PERIHAL, LAIN_LAIN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(189, NULL, 'jenispemilikan', 'Pembelian', NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKAN
(ID_SEMAKAN, ID_PARENT, KOD_SEMAK, PERIHAL, LAIN_LAIN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(190, NULL, 'jenispemilikan', 'Pusaka', NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKAN
(ID_SEMAKAN, ID_PARENT, KOD_SEMAK, PERIHAL, LAIN_LAIN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(191, NULL, 'jenispemilikan', 'Perletakhakan Mahkamah', NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKAN
(ID_SEMAKAN, ID_PARENT, KOD_SEMAK, PERIHAL, LAIN_LAIN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(192, NULL, 'jenispemilikan', 'Pemberimilikan', NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKAN
(ID_SEMAKAN, ID_PARENT, KOD_SEMAK, PERIHAL, LAIN_LAIN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(193, NULL, 'jenispemilikan', 'Lain - lain', NULL, NULL, NULL, NULL, NULL);


//TAMBAHAN data TBLSEMAKANSENARAI untuk jenis tanaman dan jenis pemilikan

INSERT INTO EKPTGHQLIVE.TBLSEMAKANSENARAI
(ID_SEMAKANSENARAI, ID_SEMAKAN, ID_URUSAN, KOD_FORM, ATURAN, CATATAN, ID_SUBURUSAN, ID_KATEGORIPEMOHON, STATUS_DOKUMEN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(266, 184, 1, 'pptjenistanaman', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKANSENARAI
(ID_SEMAKANSENARAI, ID_SEMAKAN, ID_URUSAN, KOD_FORM, ATURAN, CATATAN, ID_SUBURUSAN, ID_KATEGORIPEMOHON, STATUS_DOKUMEN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(267, 185, 1, 'pptjenistanaman', 2, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKANSENARAI
(ID_SEMAKANSENARAI, ID_SEMAKAN, ID_URUSAN, KOD_FORM, ATURAN, CATATAN, ID_SUBURUSAN, ID_KATEGORIPEMOHON, STATUS_DOKUMEN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(268, 186, 1, 'pptjenistanaman', 3, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKANSENARAI
(ID_SEMAKANSENARAI, ID_SEMAKAN, ID_URUSAN, KOD_FORM, ATURAN, CATATAN, ID_SUBURUSAN, ID_KATEGORIPEMOHON, STATUS_DOKUMEN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(269, 187, 1, 'pptjenistanaman', 4, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKANSENARAI
(ID_SEMAKANSENARAI, ID_SEMAKAN, ID_URUSAN, KOD_FORM, ATURAN, CATATAN, ID_SUBURUSAN, ID_KATEGORIPEMOHON, STATUS_DOKUMEN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(270, 188, 1, 'pptjenistanaman', 5, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKANSENARAI
(ID_SEMAKANSENARAI, ID_SEMAKAN, ID_URUSAN, KOD_FORM, ATURAN, CATATAN, ID_SUBURUSAN, ID_KATEGORIPEMOHON, STATUS_DOKUMEN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(271, 189, 1, 'pptjenispemilikan', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKANSENARAI
(ID_SEMAKANSENARAI, ID_SEMAKAN, ID_URUSAN, KOD_FORM, ATURAN, CATATAN, ID_SUBURUSAN, ID_KATEGORIPEMOHON, STATUS_DOKUMEN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(272, 190, 1, 'pptjenispemilikan', 2, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKANSENARAI
(ID_SEMAKANSENARAI, ID_SEMAKAN, ID_URUSAN, KOD_FORM, ATURAN, CATATAN, ID_SUBURUSAN, ID_KATEGORIPEMOHON, STATUS_DOKUMEN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(273, 191, 1, 'pptjenispemilikan', 3, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKANSENARAI
(ID_SEMAKANSENARAI, ID_SEMAKAN, ID_URUSAN, KOD_FORM, ATURAN, CATATAN, ID_SUBURUSAN, ID_KATEGORIPEMOHON, STATUS_DOKUMEN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(274, 192, 1, 'pptjenispemilikan', 4, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO EKPTGHQLIVE.TBLSEMAKANSENARAI
(ID_SEMAKANSENARAI, ID_SEMAKAN, ID_URUSAN, KOD_FORM, ATURAN, CATATAN, ID_SUBURUSAN, ID_KATEGORIPEMOHON, STATUS_DOKUMEN, ID_MASUK, TARIKH_MASUK, ID_KEMASKINI, TARIKH_KEMASKINI)
VALUES(275, 193, 1, 'pptjenispemilikan', 5, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

// Tambah Column SEMAK10 dan SEMAK20
ALTER TABLE TBLPPTSENARAISEMAK ADD (
    SEMAK10 VARCHAR(1 byte),
    SEMAK20 VARCHAR(1 byte)
);
