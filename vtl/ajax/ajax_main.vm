<div id="${targetName}">
<span id="W${targetName}" style="position:absolute;width:150px;"></span>
<form id="${formName}" name="${formName}" method="post">


#parse("$vmName")

<input id="command" name="command" type="hidden">

<input id="module_id" name="module_id" type="hidden" value="${moduleId}">
<input type="hidden" name="$formname" value="$formname">
</form>

</div>



<script>

//preload image
image1 = new Image();
image1.src = "../img/indicator.gif";

$('W${targetName}').innerHTML ='';

$jquery('#'+'$contentName'+' input').each(function(key, value) {
	//console.log("input x ajax main : "+this.type);
	tukarNamaButtonCetak(this);
});


function doAjaxCall${formName}(actionName){

    
   $('W${targetName}').innerHTML ='<table width="100%" bgcolor="#FF1C2E"><tr><td><img src="/${session.getAttribute("_portal_appname")}/img/indicator.gif"><b>Sila tunggu...</b></td></tr></table>';
   #if ( $queryString != "" )
   var url = '/${session.getAttribute("_portal_appname")}/y/${moduleId}?$queryString';
   #else
   var url = '/${session.getAttribute("_portal_appname")}/y/${moduleId}';
   #end
   
   var target = '${targetName}';
   doAjaxUpdater(document.${formName}, url, target, actionName);
   
}

function doAjaxCall${formName}(actionName, qs){

   $('W${targetName}').innerHTML ='<table align="center" width="100%" ><tr><td><img src="/${session.getAttribute("_portal_appname")}/img/indicator.gif"><b>Sila tunggu...</b></td></tr></table>';
   #if ( $queryString != "" )
  
   	var url = '/${session.getAttribute("_portal_appname")}/y/${moduleId}?$queryString';
   #else
  	 var url = '/${session.getAttribute("_portal_appname")}/y/${moduleId}';
  	
   #end
   	var target = '${targetName}';
   doAjaxUpdater(document.${formName}, url, target, actionName, qs);
   
}

function doDivAjaxCall${formName}(divName, actionName, qs){

   #if ( $queryString != "" )
   var url = '../div/${moduleId}?$queryString';
   #else
   var url = '../div/${moduleId}';
   #end
   var target = divName;
   doAjaxUpdater(document.${formName}, url, target, actionName, qs);
   document.getElementById(divName).innerHTML ='<table width="100%" cellpadding="0" cellspacing="0"><tr><td align="center"><img src="../img/indicator.gif"></td></tr></table>';
   
}

function doPositionDivAjaxCall${formName}(divName, actionName, qs){

   #if ( $queryString && $queryString != "" )
   var url = '../div/${moduleId}?$queryString';
   #else
   var url = '../div/${moduleId}';
   #end
   var target = divName;
   
   document.getElementById(divName).style.visibility = 'visible';
   document.getElementById(divName).style.top = cursorY;
   
   
   doAjaxUpdater(document.${formName}, url, target, actionName, qs);
   //doAjaxSubmit($formName, target, actionName, qs);
   
   document.getElementById(divName).innerHTML ='<table width="100%" cellpadding="0" cellspacing="0"><tr><td align="center"><img src="../img/indicator.gif"></td></tr></table>';
}

function doDivAjaxChainCall${formName}(divName, actionName, qs, divName2, actionName2, qs2){

   #if ( $queryString && $queryString != "" )
   var url = '../div/${moduleId}?$queryString';
   #else
   var url = '../div/${moduleId}';
   #end
   
   doAjaxUpdaterChain(document.${formName}, url, divName, actionName, qs, divName2, actionName2, qs2);
   document.getElementById(divName).innerHTML ='<table width="100%" cellpadding="0" cellspacing="0"><tr><td align="center"><img src="../img/indicator.gif"></td></tr></table>';
}

function doDivAjaxCall2${formName}(divName, actionName, qs){

   #if ( $queryString && $queryString != "" )
   var url = '../div/${moduleId}?$queryString';
   #else
   var url = '../div/${moduleId}';
   #end
   var target = divName;
   
   doAjaxUpdater(document.${formName}, url, target, actionName, qs);
   
   document.getElementById(divName).innerHTML ='<table width="100%" cellpadding="0" cellspacing="0"><tr><td align="center"><img src="../img/indicator.gif"></td></tr></table>';
   
	   blindDown(divName);
}


##This one call ajax without wait indicator
function doDivAjaxCall3${formName}(divName, actionName, qs){


   #if ( $queryString && $queryString != "" )
   var url = '../div/${moduleId}?$queryString';
   #else
   var url = '../div/${moduleId}';
   #end
   var target = divName;
   
   doAjaxUpdater(document.${formName}, url, target, actionName, qs);
   
}

function doDivAjaxChainCall3${formName}(divName, actionName, qs, divName2, actionName2, qs2){

   #if ( $queryString && $queryString != "" )
   var url = '../div/${moduleId}?$queryString';
   #else
   var url = '../div/${moduleId}';
   #end
   
   ##document.getElementById(divName).style.visibility = 'visible';
   ##document.getElementById(divName2).style.visibility = 'visible';
   doAjaxUpdaterChain(document.${formName}, url, divName, actionName, qs, divName2, actionName2, qs2);

}


function blindDown(elementId) {
		  if ( document.all ) element = document.all[elementId];
	  else element = document.getElementById(elementId);
  new Effect.BlindDown(element,{duration:0.5}); 
		  new Effect.Highlight(element,{duration:1.5})
	  	return false;
}


function dnKeyPress(e, div, cmd, par) {
   var characterCode;
   if(e && e.which){
     e = e;
     characterCode = e.which;
   }
   else{
     e = event;
     characterCode = e.keyCode;
   }
   if(characterCode == 13){
     doDivAjaxCall${formName}(div, cmd, par);
     return false;
   }
   else {
     return true;
   }
}


</script>

