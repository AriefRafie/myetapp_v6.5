<style>
	
	.blur{
	/*
  -webkit-filter: blur(5px); 
  filter: blur(5px);
  cursor:none;
  */	
  display:none;
}
	
</style>

<div class="welcome" id="id_DesktopController">
<form name="WelcomeDesktopController" >	
	
#if ( $userIsLogged )

	#set ( $current_role = "" )
	##::::: myrole atas  : $myrole<br>
	##primary : 	$primaryRole.name</br>
                      	
	#if ( $myrole == "" || $myrole == "anon" )
		#set ( $current_role = $primaryRole.name)
		##set ( $current_role = $primaryRole.description )
	#end
	
	##:::::: current atas : $current_role <br>	
	#foreach( $secondaryRole in $secondaryRoles )
		##razman edit 
		#if ( $myrole == $secondaryRole.name && $secondaryRole.LAYER == "2" )
			## #set ( $current_role = $secondaryRole.description )
			#set ( $current_role = $secondaryRole.name )
		#end
	#end
	<b>$label_welcome 
	<!--#if($cnt_portal_username != "" && $cnt_afterLogin == "Y"):: $!cnt_portal_username #else :${session.getAttribute("_portal_username")}#end-->
	${session.getAttribute("_portal_username")}</b> |
	##login type : ${session.getAttribute("_ekptg_loginType")} 
	##<br> current bawah : $current_role
	##<Br> myrole : $myrole
	##<br>primary : $primaryRole.description
	##</br>
	#*
	<select id="role" name="role" onchange="changeRoleAll(this.value)">
		##<option value="0">- SILA PILIH -</option>
		
		Razman comment
		<option value="$!primaryRole.id" onclick="changeRole('$!primaryRole.name')" $selected>$!primaryRole.description</option>
			#foreach( $secondaryRole in $secondaryRoles )
				#if ( $secondaryRole.description != "" )
					#if ( $current_role == $secondaryRole.description ) 
						#set ( $selected = "selected" )
					#else
						#set ( $selected = "" )
					#end
					<option value="$!secondaryRole.name" onclick="changeRole('$!secondaryRole.name')" $selected>$!secondaryRole.description</option>
				#end
			#end 
	</select>
	*#	
		
	#set($diplaySelectRole="style='display:none'")		
	#if (${session.getAttribute("_ekptg_loginType")} == "internal") 
		#set($diplaySelectRole="")	
	#end
	
	<span $diplaySelectRole >
	Current Role:
	<select title="* : Merujuk kepada kumpulan peranan" id="role" name="role" onchange="changeRoleV2(this.value)">		
			##<option value="$!primaryRole.name"  $selected>$!primaryRole.description</option>
						
			#foreach( $secondaryRole in $secondaryRoles )
			##	#if ( $secondaryRole.description != "" )
					## #if ( $current_role == $secondaryRole.description ) 
					 #if ( $current_role == $secondaryRole.name ) 
						#set ( $selected = "selected" )
					#else
						#set ( $selected = "" )
					#end
					
					#if($!secondaryRole.LAYER == "1")
					<option value=""  $selected>*$!secondaryRole.KOD </option>
					#else
					<option value="$!secondaryRole.name" $selected>&nbsp;&nbsp;&nbsp;&nbsp;$!secondaryRole.description</option>
					#end
				#end
			## #end 
	</select>
	</span>
		
	<script>	
			
		$jquery(document).ready(function () {
			
		//alert('myrole : '+'$myrole'+' current_role : '+'$current_role' + ' _portal_login : '+ '${session.getAttribute("_portal_login")}');				
		//alert('afterLogin :::: '+'${session.getAttribute("afterLogin")}');
		if('$myrole' == 'anon'){
			refreshPage('$current_role');
		}else{
				//if('$cnt_afterLogin'=='Y')
				if('${session.getAttribute("afterLogin")}'=='Y')
				{
					//alert('_portal_login :::: '+'${session.getAttribute("afterLogin")}');
					checkKeaktifan('$current_role');
					if('${session.getAttribute("_portal_login")}' != 'admin' && '${session.getAttribute("_portal_login")}'.indexOf('ppk') != 0 && '${session.getAttribute("_portal_login")}'.indexOf('support') != 0)	
					{	
						//alert('masuk : '+document.getElementById('changeLogin').value);
						if(document.getElementById('changeLogin').value == '' || document.getElementById('changeLogin').value == 'Y'
						|| document.getElementById('changePassword').value == '' || document.getElementById('changePassword').value == 'Y')
						{
							//alert('masuk 2');
							checkPasswordExpired();
						}
					}	
				}	
				
		}
				
	    $jquery(".popup").hide();
        $jquery(".openpop").click(function (e) {
		
        e.preventDefault();
		$jquery("iframe").attr("src", $jquery(this).attr('href'));
        $jquery(".links").fadeOut('slow');		
        $jquery(".popup").fadeIn('slow');
		
    });

    $jquery(".close").click(function () {
        $jquery(this).parent().fadeOut("slow");
        $jquery(".links").fadeIn("slow");
    });
		
	});	
	</script>	
	
##	<span id="menu_parent_roles2">
##	<a><font class="font_role_select">Current Role: $current_role</font></a></span>
##	<div id="menu_child_roles" style="position: absolute; visibility: hidden;z-index:1000">
##	<a class="pulldown_menu" href="javascript:changeRole('')">$!primaryRole.description</a>
##	#foreach( $secondaryRole in $secondaryRoles )
##	#if ( $secondaryRole.description != "" )
##	<a class="pulldown_menu" href="javascript:changeRole('$!secondaryRole.name')">$!secondaryRole.description</a>
##	#end
##	#end
##	</div>
##	]
	#set ( $location = "pagetheme" )
	#set ( $caption = "Page Template" )
	#set ( $role  = ${session.getAttribute("_portal_role")} )

	#if ( $role == "anon" || $role == "root") 
		#set ( $location = "customize")
		#set ( $caption = "Personalize" )

		#if ( ${session.getAttribute("_portal_action")} != "customize" && ${session.getAttribute("_portal_action")} != "pagetheme" ) 
			<a href='javascript:document.location.href = "${location}"' class="font_welcome"><u>${caption}</u></a>
		#else
			<a href='javascript:document.location.href = "../c/"' class="font_welcome"><u>Done</u></a>
		#end
			|
	#end ## This mean that, Only anon and root can personalize.Others can't

	#if (${session.getAttribute("_ekptg_loginType")} == "internal")
		&nbsp;&nbsp;&nbsp;[ 
		<a href='javascript:document.location.href = "logout_internal"' class="font_welcome"><u>Logout</u></a>
		<!--<a href="javascript:forceLogout('logout_internal')" class="font_welcome"><u>Logout</u></a>-->
		
		]
	#else
		&nbsp;&nbsp;&nbsp;[ 
	    <a href='javascript:document.location.href = "logout"' class="font_welcome"><u>Logout</u></a>
		<!--<a href="javascript:forceLogout('logout')" class="font_welcome"><u>Logout</u></a>-->
		 ]
	#end	
	
<span class="links">
[ <a class="openpop font_welcome" href="http://openspeedtest.com/Get-widget.php" ><u>Ujian Rangkaian</u></a> ]
</span>
<div class="wrapper" >
    <div class="popup" style="display:none; position: fixed; background-color:white;  left: 0px; top:0px;  height: 490px; width: 735px;   " >
        <iframe src=""   scrolling="no"  width="735" height="490">
            <p>Your browser does not support iframes.</p>
        </iframe>
		<br>
&nbsp;<a style="cursor:pointer" class="close"><span style="background-color:white;padding: 5px;"><font color='blue'><u>Tutup Pengujian Rangkaian</u></font></span></a>
</div>

</div>

	##if anonymous login
	#if ( ${session.getAttribute("_portal_role")} == "anon" && ${session.getAttribute("_portal_action")} != "customize" && ${session.getAttribute("_portal_action")} != "pagetheme" )
		#if ( ${session.getAttribute("_portal_action")} != "addHtmlContentModule" &&  ${session.getAttribute("_portal_action")} != "contentManagerModule")
			| <a href='javascript:document.location.href = "addHtmlContentModule"' class="font_welcome"><u>Add HTML Module</u></a>
			|
			<a href='javascript:document.location.href = "contentManagerModule"' class="font_welcome"><u>Content Manager</u></a>
		#end
	#end	     
	##end if anonymous login
	#if ($role == "rootHLAi") 
	<a href="../vtl/admin/Browser.jsp">.</a>
	#end
	
	## Attached menu
	#if ($role != "online")
	<script type="text/javascript">
	at_attach("menu_parent_roles2", "menu_child_roles", "hover", "y", "pointer");
	</script>
	#end	
	
#end
<input type=hidden name=command>

<div id="outputChangeRole"></div>

<div id="outputCheckAktif"></div>
<div id="outputCheckExpired"></div>
<div id="outputCheckUserNameIC"></div>
<div id="outputLogout"></div>

<input type="hidden" id="changeLogin" name="changeLogin"  >
<input type="hidden" id="changePassword" name="changePassword" >

<fieldset id="fieldset_tukar_password" style="display:none">

<legend>Pertukaran Maklumat Pengguna</legend>

<table id="table_tukar_password" class="table_tukar_password"  width="100%" border="0" >
<tr>
	<td>
		
	</td>
	<td colspan="3">
		<span id="displayMesejPassword" class='blink'></span>
	</td>	
</tr>
<tr>
			<td valign="top"  width="1%"></td><td valign="top"  width="28%"></td><td valign="top"  width="1%"></td><td valign="top"  width="70%"><!-- $viewPengguna --></td>
</tr>

<tr id="tr_MYID">
				<td valign="top" >
				<font color="red" >*</font>				
				</td>			
				<td valign="top" >
				MyID
				</td>
				<td valign="top" >
				:
				</td>
				<td valign="top" >
								
				<!-- open username by IC -->
				<input name="NOKP1" type="text" 
				id="NOKP1" style="width:50px;" 
				onKeyUp="javascript:validateIC_V3(event,this,this.value,'NOKP2');checkDOBByIC_V3(this,this.value,'span_NOKP1');checkDuplicateNewLogin();" 
				value="" size="7" maxlength="6"  
				
				/>
               
               	<span id="span_NOKP1">
                <input type="hidden" id="CHECK_NOKP1" 
				name="CHECK_NOKP1" value="true" >
                </span> 
                                     &nbsp; 
                <input name="NOKP2" type="text" 
                id="NOKP2" style="width:20px;" 
                onKeyUp="javascript:validateIC_V3(event,this,this.value,'NOKP3');checkDuplicateNewLogin();" 
                value="" size="1" maxlength="2"  />
                                      &nbsp; 
                                      
                <input name="NOKP3" type="text" 
                id="NOKP3" style="width:40px;" 
                onKeyUp="javascript:validateIC_V3(event,this,this.value,'NOKP3');checkDuplicateNewLogin();" 
               
                value="" size="5" maxlength="4" />     
             
             	<!-- close username by IC -->
             	<div id="outputCheckMyID" class="table_tukar_password">
             		<input type="hidden" id="duplicateMYID" name="duplicateMYID" value="N" >
             	</div>
			</td>
				
			</tr>

<tr id="tr_PASSWORD1">
				<td valign="top" >
				<font color="red" >
				*			
				</font>	
				
				</td>			
				<td valign="top" >
				Kata Laluan Asal
				</td>
				<td valign="top" >
				:
				</td>
				<td valign="top" >
				<div style="width:50%" class="table_tukar_password">
					<input size="50" maxlength="12" type="password" 
					id="PASSWORD_ASAL" 
					name="PASSWORD_ASAL" 				
					 >	
				</div>		
				</td>
			</tr>
			
<tr id="tr_PASSWORD2">
				<td valign="top" >
				<font color="red" >
				*			
				</font>	
				
				</td>			
				<td valign="top" >
				Kata Laluan Baru
				</td>
				<td valign="top" >
				:
				</td>
				<td valign="top" >
				<div style="width:50%" class="table_tukar_password">
					
					
				<input type="hidden" id="ps_call_NEW" name="ps_call_NEW" value="no">
				<input size="50" maxlength="12" type="password" 
				onKeyUp="setPasswordClass(this,this.value);"	
				id="PASSWORD_NEW" 
				name="PASSWORD_NEW" 				
				 >
				 
						
				</div>		
				</td>
			</tr>
			
			<tr id="tr_PASSWORD3">
				<td valign="top" >
				<font color="red" >
				*			
				</font>	
				
				</td>			
				<td valign="top" >
				Pengesahan Kata Laluan Baru
				</td>
				<td valign="top" >
				:
				</td>
				<td valign="top" >
				<div style="width:50%" class="table_tukar_password">
					
					
				<input size="50" maxlength="12" type="password" 
				id="PASSWORD_NEW2" 
				name="PASSWORD_NEW2" 				
				 >
				 
						
				</div>		
				</td>
			</tr>
			<tr>
				<td valign="top" >				
				</td>			
				<td valign="top" >				
				</td>
				<td valign="top" >				
				</td>
				<td valign="top" >
				<input type="button" id="BTNSAVE" name="BTNSAVE" onClick="saveNewPassword()" value="Simpan" > 
	   			</td>
			</tr>
</table>
</fieldset>
</form>

<form name=fx>
<input type=hidden name=command>


<!--	
tutup checking for rtf utk PPT 
	|| $myrole.equals("(PPT)PengarahUnit") 
	|| $myrole.equals("(PPT)PenolongPengarahUnit") 
	|| $myrole.equals("(PPT)PenolongPegawaiTanahUnitPengambilanTanah") 
	|| $myrole.equals("(PPT)PenolongPegawaiTanahUnitPengambilanTanah(NT27)") 
	|| $myrole.equals("(PPT)PenolongPegawaiTanahUnitPengambilanTanah(NT17)") 
	|| $myrole.equals("(PPT)PembantuTadbirUnitPengambilanTanah") 
	|| $myrole.equals("(PPT)KetuaPenolongPengarahUnit") 
	|| $myrole.equals("adminppt") 
-->	


<div class="reportformatting" id="reportformatting">
	
	<!--Update 2017/10/23 -->
	##set ($reporType = ["PDF","EXCEL"])
	#set ($reporType = ["PDF"])
	#if($myrole.equals("(INTEGRASI)UsersMACGDI") || $myrole.equals("(HTP)HQPenggunaRekod"))
		##set ($reporType = ["PDF","RTF","EXCEL"])		
		#set ($reporType = ["PDF","EXCEL"])
	#elseif(	
	$myrole.equals("(HTP)HQPenggunaGadaian") 
	|| $myrole.equals("(PHP)UserAPB") 
	|| $myrole.equals("(PHP)UserHasil") 
	|| $myrole.equals("(PHP)UserPelepasan") 
	|| $myrole.equals("(PHP)PYWPengarahNegeri") 
	|| $myrole.equals("(PHP)PYWPenolongPengarahNegeri") 
	|| $myrole.equals("(PHP)PYWPenolongPegawaiTanahNegeri") 
	|| $myrole.equals("(PHP)PYWPengarahHQ") 
	|| $myrole.equals("(PHP)PYWPenolongPengarahHQ") 
	|| $myrole.equals("(PHP)PYWPenolongPegawaiTanahHQ"))		
		##set ($reporType = ["PDF","RTF","EXCEL"])
		#set ($reporType = ["RTF"])
	#else
		##set ($reporType = ["PDF","EXCEL"])
		#set ($reporType = ["PDF"])
	#end
	#foreach ($i in $reporType)
		#if ( ${session.getAttribute("rFormat")} == $i )
			$i |
		#else
			<a href="#" onClick="javascript:doChangeReport('$i');"><u>$i</u></a> |
		#end
	#end

<b>Versi $!{session.getAttribute("_moduleVer")}</b>
<!--
&nbsp;&nbsp;  [ Language : #if($!{session.getAttribute("selectedLanguage")}=="ENGLISH")<u  style="cursor:pointer" onClick="refreshLanguage('MELAYU');" >Bahasa Melayu</u> #else <b>Bahasa Melayu</b> #end | #if($!{session.getAttribute("selectedLanguage")}=="MALAY" || $!{session.getAttribute("selectedLanguage")}=="" ) <u  style="cursor:pointer" onClick="refreshLanguage('ENGLISH');">English</u> #else <b>English</b> #end]
-->

</div>
</form>

</div>
<br>

<script>
	
	function forceLogout(comd) {
	   	/*
	    document.WelcomeDesktopController.action = comd;
	    document.WelcomeDesktopController.submit();
	    */
	    url = "../servlet/ekptg.view.utils.ChangeRole";
			actionName = comd;
			target = "outputLogout";
			doAjaxUpdater(document.WelcomeDesktopController, url, target, actionName);
	}
	
	
	function refreshLanguage(type) {
		document.location = "?language_type="+type;
	}
	
	function refreshPage(role) {
		document.location = "?myrole="+role;
	}
	
	function saveNewPassword() {
		//alert('masuk function');
		//alert(document.getElementById('role').value);
		var password_asal = document.getElementById('PASSWORD_ASAL').value;
		var password_baru = document.getElementById('PASSWORD_NEW').value;
		var password_baru_pengesahan = document.getElementById('PASSWORD_NEW2').value;
		var SelectedRole = document.getElementById('role').value;
		var changeLogin = document.getElementById('changeLogin').value;
		var changePassword = document.getElementById('changePassword').value;
		var bool_check = true;
		
		if(changeLogin=="Y"){
			if(document.getElementById("NOKP1").value==""){
				alert("Masukkan MyID Pengguna Dengan Lengkap!");
				document.getElementById("NOKP1").focus();
				bool_check = false;
			
			}else if(document.getElementById("NOKP2").value==""){
				alert("Masukkan MyID Pengguna Dengan Lengkap!");
				document.getElementById("NOKP2").focus();
				bool_check = false;
			
			}else if(document.getElementById("NOKP3").value==""){
				alert("Masukkan MyID Pengguna Dengan Lengkap!");
				document.getElementById("NOKP3").focus();
				bool_check = false;
			
			}else if(document.getElementById("NOKP1").value.length != document.getElementById("NOKP1").maxLength){
				alert("Format MyID Tidak Tepat!");
				document.getElementById("NOKP1").focus();
				bool_check = false;
				
			}else if(document.getElementById("CHECK_NOKP1").value=="false"){
				alert("Format MyID Tidak Tepat!");
				document.getElementById("NOKP1").focus();
				bool_check = false;
				
			}else if(document.getElementById("NOKP2").value.length != document.getElementById("NOKP2").maxLength){
				alert("Format MyID Tidak Tepat!");
				document.getElementById("NOKP2").focus();
				bool_check = false;
			
			}else if(document.getElementById("NOKP3").value.length != document.getElementById("NOKP3").maxLength){
				alert("Format MyID Tidak Tepat!");
				document.getElementById("NOKP3").focus();
				bool_check = false;
			
			}else if(document.getElementById("duplicateMYID").value=="Y"){
				alert("MYID Telah Wujud Didalam Sistem, Sila Hubungi Pihak BPICT!");
				document.getElementById("NOKP1").focus();
				bool_check = false;
				
			}
			
		}
		
		if(bool_check == true && changePassword=="Y"){
		
			if(password_asal==''){
				alert('Sila Masukkan Katalaluan Asal!');
				document.getElementById('PASSWORD_ASAL').focus();
				bool_check = false;
				
			}else if(password_baru==''){
				alert('Sila Masukkan Katalaluan Baru!');
				document.getElementById('PASSWORD_NEW').focus();
				bool_check = false;
				
			}else if(password_baru_pengesahan==''){
				alert('Sila Masukkan Pengesahan Katalaluan Baru!');
				document.getElementById('PASSWORD_NEW2').focus();
				bool_check = false;
				
			}else if(password_asal==password_baru){
				alert('Sila Pastikan Katalaluan Yang Baru Tidak Sama Dengan Yang Asal!');
				document.getElementById('PASSWORD_NEW2').focus();
				bool_check = false;
				
			}else if(password_baru_pengesahan!=password_baru){
				alert('Sila Pastikan Katalaluan Yang Baru Sama Dengan Pengesahan Katalaluan!');
				document.getElementById('PASSWORD_NEW2').focus();
				bool_check = false;
				
			}
			
		}
		
		if(bool_check == true){
			//alert('lepas');	
			url = "../servlet/ekptg.view.utils.ChangeRole?SelectedRole="+SelectedRole;
			actionName = "doSaveNewPassword";
			target = "displayMesejPassword";
			doAjaxUpdater(document.WelcomeDesktopController, url, target, actionName);
			
		}
		
	}
	
	/*
	function checkUserNameIC() {
		var getUserLogin = '${session.getAttribute("_portal_login")}';	
		//alert(getUserLogin.length+' :::: '+regIsNumber(getUserLogin));
		if(getUserLogin.length != 12 && regIsNumber(getUserLogin)==false)
		{
		
				url = "../servlet/ekptg.view.utils.ChangeRole";
				actionName = "doCheckUserNameIC";
				target = "outputCheckUserNameIC";
				doAjaxUpdater(document.WelcomeDesktopController, url, target, actionName);
				
		}
		
	}
	*/
	
		var regIsNumber = function (fData) {
		var reg = new RegExp("^[-]?[0-9]+[\.]?[0-9]+$");
	    return reg.test(fData)
	 }
	
	function checkPasswordExpired() {
		url = "../servlet/ekptg.view.utils.ChangeRole";
		actionName = "doCheckExpired";
		target = "outputCheckExpired";
		doAjaxUpdater(document.WelcomeDesktopController, url, target, actionName);
		
	}

	function checkKeaktifan(role) {
		//alert('role : '+role)
		if(role!=""){
			url = "../servlet/ekptg.view.utils.ChangeRole?SelectedRole="+role;
			actionName = "doCheckAktif";
			target = "outputCheckAktif";
			doAjaxUpdater(document.WelcomeDesktopController, url, target, actionName);
				
		}
		
	}

	function checkNotAktif(mesej){
		alert(mesej);
	}
	/*
	function displayErrorUserNameIC(mesej)
	{
	//alert(mesej);	
	document.getElementById('displayMesejPassword').innerHTML = "<font color='red'  class='blink'><strong>"+mesej+"</strong></font>";
	document.getElementById('fieldset_tukar_password').style.display = "";
	}
	*/
	
	function displayPasswordExpiry(mesej){
		//alert('ssssssssssss');
		//alert(mesej);			
		//$jquery('#displayMesejPassword').innerHtml(mesej);
		document.getElementById('displayMesejPassword').innerHTML = "<font color='red' ><strong>"+mesej+"</strong></font>";
		document.getElementById('fieldset_tukar_password').style.display = "";
		
		var changeLogin = document.getElementById('changeLogin').value;
		var changePassword = document.getElementById('changePassword').value;
		//alert(changeLogin);
		if(changeLogin == "Y"){
			document.getElementById('tr_MYID').style.display = "";
		}else{
			document.getElementById('tr_MYID').style.display = "none";
		}
		
		if(changePassword == "Y"){
			document.getElementById('tr_PASSWORD1').style.display = "";
			document.getElementById('tr_PASSWORD2').style.display = "";
			document.getElementById('tr_PASSWORD3').style.display = "";
		
		}else{
			document.getElementById('tr_PASSWORD1').style.display = "none";
			document.getElementById('tr_PASSWORD2').style.display = "none";
			document.getElementById('tr_PASSWORD3').style.display = "none";
		
		}
		
	}
	
	function changeRoleV2(role) {
		if(role==""){
			alert("Sila Pilih Peranan!");
			return false;
			
		}else{
				//alert('sss');
				url = "../servlet/ekptg.view.utils.ChangeRole?SelectedRole="+role;
				actionName = "doChangeRole";
				target = "outputChangeRole";
				//alert(document.getElementById("outputChangeRole"));
				//alert(document.WelcomeDesktopController);
				//$jquery("#"+target).html("AYAM");
				doAjaxUpdater(document.WelcomeDesktopController, url, target, actionName);
		
		}
		
	}

	function doChangeReport(x) {

		if ( !window.confirm("Tukar format report kepada "+x+" ?") ) return;
			url = "../servlet/ekptg.view.utils.ReportFormat?format="+x;
			actionName = "doChangeReport";
			target = "reportformatting";
			doAjaxUpdater(document.fx, url, target, actionName);
	
	}
	
	function setPasswordClass(elem,value)
	{
		var ch = document.getElementById("ps_call_NEW").value;
		if(value!="")
		{
		//alert("ch : "+ch);
		//alert("elem.className : "+elem.className);
			elem.className = "password";
			//alert("elem.className * : "+elem.className);
			if(ch=="no")
			{
			//alert("atas");
				document.getElementById("ps_call_NEW").value="yes";
				
				$jquery('.password').pstrength();
			//	alert('bawah');
			}
		}
		else
		{
			document.getElementById("ps_call_NEW").value="";
		}
	}
		
	validateIC_V3 = function(e,elmnt,content,nextElementID) {
		//if it is character, then remove it..
		var keycode;
		if(window.event)keycode = window.event.keyCode;
		else if (e) keycode = e.which;
		else return true;	
		//alert(keycode);
	
		if((keycode >= 37 && keycode <= 40) || (keycode == 9)) return false;
		if (isNaN(content)) {
			elmnt.value = RemoveNonNumeric(content);
			return;
		}
		//goto next column if maximum length reach
		if (content.length == elmnt.maxLength) {
			goTo(nextElementID);
				
		}
		
	}

	checkDOBByIC_V3 = function(elmnt,content,err_span) {
			year = content.substring(0,2);
	 		if (year <=10) {
	 			year = parseInt(year) + 2000;
	 		} else {
	 			year = parseInt(year) + 1900
	 		}
			month = content.substring(2,4);
			day = content.substring(4,6);
			var date_str = day + '/' + month + '/' + year ;
			if(isValidDate_V3(date_str)==true)
			{
				$jquery("#"+err_span).html("<input type='hidden' id='CHECK_"+elmnt.id+"' name='CHECK_"+elmnt.id+"' value='true' >");
				
			}
			else
			{
				$jquery("#"+err_span).html("<font class='blink' color='red'>Format MyID Tidak Tepat!<input type='hidden' id='CHECK_"+elmnt.id+"' name='CHECK_"+elmnt.id+"' value='false' ></font>");
			}
		
	}

	function isValidDate_V3(s) {
	  var bits = s.split('/');
	  var d = new Date(bits[2], bits[1] - 1, bits[0]);
	  return d.getFullYear() == bits[2] && d.getMonth() + 1 == bits[1];
	} 


	isValidDate_V3XXX = function(dateString)
	{
		var parts = dateString.split("/");
		var day = parseInt(parts[0], 10);
		var month = parseInt(parts[1], 10);
		var year = parseInt(parts[2], 10);
		alert(" dateString : "+dateString+" day : "+day+" month : "+month+" year : "+year)
		var monthLength = [ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];
		
	    if(!/^\d{2}\/\d{2}\/\d{4}$/.test(dateString))
	    {
	    	return false;
	    }   
	    else if(year < 1000 || year > 3000 || month == 0 || month > 12)
	    {
	    	return false;
	    }
	    else if(year % 400 == 0 || (year % 100 != 0 && year % 4 == 0))
	    {
		monthLength[1] = 29;
	    return day > 0 && day <= monthLength[month - 1];
	    	return false;
	    }
	    else
	    {
	    	return true;
	    }
	
	}

	RemoveNonNumeric_V3 = function(elmnt,content)
	{
	      var strValidCharacters = "1234567890";
	      var strReturn = "";
	      var strBuffer = "";
	      var intIndex = 0;
	      // Loop through the string
	      for( intIndex = 0; intIndex < content.length; intIndex++ )
	      {
	            strBuffer = content.substr( intIndex, 1 );
	            // Is this a number
	            if(strValidCharacters.indexOf( strBuffer ) > -1 )
	            {
	                  strReturn += strBuffer;
	            }
	      }
	      elmnt.value = strReturn;
	}

	function checkMaxLength_V3(elmnt,content,minlength,err_span){
		if(content.length != minlength){
			$jquery("#"+err_span).html("<font color='red'>Sila Masukkan "+minlength+" Aksara Pada Medan Ini!</font><input type='hidden' id='CHECK_"+elmnt.id+"' name='CHECK_"+elmnt.id+"' value='false' >");
		}else{
			$jquery("#"+err_span).html("<input type='hidden' id='CHECK_"+elmnt.id+"' name='CHECK_"+elmnt.id+"' value='true' >");
		}
		
	}

	function checkDuplicateNewLogin(){
		var fullmyid = document.getElementById("NOKP1").value + document.getElementById("NOKP2").value + document.getElementById("NOKP3").value;
		if(fullmyid.length==12){
			url = "../servlet/ekptg.view.utils.ChangeRole?fullnewmyid="+fullmyid;
			actionName = "doCheckMyID";
			target = "outputCheckMyID";
			doAjaxUpdater(document.WelcomeDesktopController, url, target, actionName);
			
		}
				
	}


</script>


